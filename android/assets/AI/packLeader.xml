<Any>
    <ClearValue Key="Enemy"/>

    <GetAllVisible Type="Tiles" Key="Tiles"/>
    <GetAllVisible Type="Enemies" Key="Enemies"/>
    <Pick Input="Enemies" Output="Enemy"/>
    <ConvertTo Input="Enemy" Output="EnemyPos" Type="Position"/>

    <Increment Key="RoomCounter"/>

    <Priority>
        <!--Sequence>
            <CheckValue Key="EnemyPos"/>
            <CheckValue Condition="morale < 0"/>
            <Priority>
                <CheckValue Key="DstRoom"/>
                <Sequence>
                    <GetNeighbourRoom Key="Room"/>
                    <ConvertTo Input="Room" Output="DstRoom"/>
                </Sequence>
            </Priority>
            <MoveTo Key="DstRoom"/>
            <ClearValue Key="DstRoom"/>
        </Sequence-->
		<Import Path="attackClosest"/>

		<Random>
			<Wait/>
            <Wait/>
            <Sequence>
                <CheckValue Key="RoomCounter" Condition="RoomCounter > 25"/>
                <SetState Completed="Running" Failed="Completed">
                    <Until State="Running">
                        <Priority>
                            <CheckValue Key="DstRoom"/>
                            <Sequence>
                                <GetRoom Key="Room"/>
                                <ConvertTo Input="Room" Output="DstRoom"/>
                            </Sequence>
                        </Priority>
                        <MoveTo Key="DstRoom"/>
                        <ClearValue Key="DstRoom"/>
                        <SetValue Key="RoomCounter" Value="0" />
                    </Until>
                </SetState>
            </Sequence>
            <Import Path="wander"/>
		</Random>
    </Priority>

</Any>